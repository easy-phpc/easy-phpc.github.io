# Установка сторонних скриптов

Назад: Обработка сессий в PHPC • К началу: Документация • Далее: Маленькие хитрости

Данная статья содержит краткие руководства по установке различных скриптов (систем обмена ссылками, баннерокрутилок и тому подобного) на проекты, взведенные на PHPC.

Как правило, установка сторонних скриптов поверх движка не вызывает проблем − достаточно закачать файлы на сервер и вручную подключить их к системе в файле phpc/config.php. В более сложных ситуациях требуется написание коннектора − модуля, хранящегося в папке plugins (и подключаемого при помощи константы PhpcPreloadPlugins), который берет на себя все взаимодействие с "чужими" скриптами. Наконец, для некоторых распространенных систем уже написаны "родные" модули для PHPC, которые делают всю работу наилучшим образом.

Sape.ru − система продажи ссылок

Sape − это популярная система для платного показа рекламных ссылок на сайте. Для этой системы уже написан нативный модуль поддержки для PHPC. Пользоваться классом, поставляемым сайтом sape.ru, не рекомендуется. Приведенный ниже модуль делает все то же самое, но гораздо проще и экономичнее, к тому же использует удобные возможности шаблонизатора PHPC и встроенное файловое кеширование. Для установки модуля выполните следующие несложные шаги:

1. Зарегистрируйтесь на сайте sape.ru.
2. Скачайте по этой ссылке готовый модуль Sape для PHPC, распакуйте его и закачайте каталоги language и plugins на сайт. После этого зайдите в панель управления и импортируйте файл templates.sql в базу данных. В списке шаблонов проекта появится два новых шаблона − sapeLinks и sapeContext.
3. Добавьте в конец файла phpc/config.php строку:
// В качестве значения константы укажите ваш 32-значный код с сайта sape.ru
define("SapeUserCode","0123456789abcdef0123456789abcdef");
4. Добавьте "sape" в список подключаемых плагинов (константа PhpcPreloadPlugins):
define("PhpcPreloadPlugins","sape");
5. Для вывода ссылок на странице, добавьте в любом удобном месте сайта, например в шаблоне htmlDesign, специальный тег <insert:sapeLinks/>, как в примере ниже:
<?-- Используйте этот тег для вывода всех ссылок --?>
<insert:sapeLinks/>

<?-- Или такой вариант для вывода части ссылок (например, не более 3 штук) --?>
<insert:sapeLinks count="3"/>
6. Для вывода контекстных ссылок на странице, пройдитесь по всем шаблонам проекта, и оберните все подходящие области − вывод новостей, статей, статический текст − специальным тегом <insert:sapeContext>, как в примере ниже:
<?-- Обернутый фрагмент становится областью для продажи контекстных ссылок --?>
<insert:sapeContext>
Добро пожаловать на сайт!<br>
Этот проект был создан в рекордно короткий срок...<br>
</insert:sapeContext>

<?-- Если вам лень искать подходящие области для контекста, --?>
<?-- можно просто обернуть тег <var:content> в шаблоне htmlDesign --?>
<insert:sapeContext><var:content></insert:sapeContext>
7. После того, как модуль установлен и сайт подготовлен к выводу ссылок, можно смело добавлять ваш ресурс на сайте sape.ru (ссылка "Создать новую площадку").

Назад: Обработка сессий в PHPC • К началу: Документация • Далее: Маленькие хитрости